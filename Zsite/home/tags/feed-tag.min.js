riot.tag2("feed-tag",'<div class="flex"><virtual each="{items}"><a class="flexItem" href="{url}"> <div class="card item"> <div class="card-image"> <figure class="image"><img class="cardImg" riot-src="{image}"></figure> </div> <div class="card-content"> <div class="media"> <div class="media-left"> <figure class="image is-48x48"><img riot-src="{author.avatar}"></figure> </div> <div class="media-content"> <p class="title is-5">{content_text}</p> <p class="subtitle is-6">{author.name}</p> </div> </div> </div> </div></a></virtual> <div id="add"> <p></p> </div> </div>','feed-tag .item,[data-is="feed-tag"] .item{ width: 300px; margin: 5px; height: 610px; } feed-tag .cardImg,[data-is="feed-tag"] .cardImg{ height: 300px !important; object-fit: cover; } feed-tag .subtitle,[data-is="feed-tag"] .subtitle{ margin-bottom: .5rem !important; }',"",function(i){function init(){void 0,thiz.items=[],thiz.feed=[],fetch(ROOT+"/blog/items.json").then(function(i){return i.json()}).then(function(i){feed=i,setup(),add(2),thiz.observer=new IntersectionObserver(function(i){i[0].isIntersecting&&(void 0,add(2))}),thiz.observer.observe(thiz.addEl)})}function setup(){thiz.addEl=document.getElementById("add"),thiz.feed=feed.items;for(let i of thiz.feed)i.url=ROOT+"/blog/"+i.url+"/",i.image=i.image}function add(i){var t;for(void 0,t=0;t<i;t++)thiz.feed[0]&&thiz.items.push(thiz.feed.pop());thiz.update(),inView(thiz.addEl)&&thiz.feed[0]&&add(1)}this.on("*",function(i){}),this.items=[],this.feed=[],thiz=this,init(),this.addFew=function(i){add(i)}.bind(this)});